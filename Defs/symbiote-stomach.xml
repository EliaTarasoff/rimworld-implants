<?xml version="1.0" encoding="utf-8" ?>
<Defs>
    <ThingDef ParentName="SymbioteBase">
        <defName>StomachSymbiote</defName>
        <label>stomach symbiote</label>
        <description>The stomach symbiote was designed to keep people alive on less, low-quality food. Invented for the military as an alternative to survival-rations, they were abandoned when the negative effects became known. They are now used mostly by slaving colonies.</description>

        <statBases>
            <MarketValue>300</MarketValue>
            <Mass>0.2</Mass>
        </statBases>
    </ThingDef>

    <HediffDef ParentName="SymbioteHediffBase">
        <defName>StomachSymbioteHediff</defName>
        <label>stomach symbiote</label>
        <labelNoun>a stomach symbiote</labelNoun>

        <spawnThingOnRemoved>StomachSymbiote</spawnThingOnRemoved>
        <stages>
            <li>
                <label>freshly implanted</label>

                <painOffset>0.8</painOffset>
                <hungerRateFactorOffset>-0.9</hungerRateFactorOffset>
                <vomitMtbDays>0.1</vomitMtbDays>
            </li>

            <li>
                <label>partially integrated</label>

                <minSeverity>3</minSeverity>
                <painOffset>0.4</painOffset>
                <hungerRateFactorOffset>-0.6</hungerRateFactorOffset>
                <vomitMtbDays>0.2</vomitMtbDays>
            </li>

            <li>
                <label>fully integrated</label>

                <minSeverity>9</minSeverity>
                <hungerRateFactorOffset>-0.3</hungerRateFactorOffset>
            </li>
        </stages>
    </HediffDef>

    <ThoughtDef>
        <defName>StomachSymbioteThought</defName>
        <workerClass>ThoughtWorker_Hediff</workerClass>
        <hediff>StomachSymbioteHediff</hediff>
        <validWhileDespawned>true</validWhileDespawned>
        <stages>
            <li>
                <label>stomach symbiote</label>
                <description>This thing is still eating into my body...</description>
                <baseMoodEffect>-15</baseMoodEffect>
            </li>

            <li>
                <label>stomach symbiote</label>
                <description>It's settled down a bit, but it's still pretty painful.</description>
                <baseMoodEffect>-7</baseMoodEffect>
            </li>

            <li>
                <label>stomach symbiote</label>
                <description>This thing is keeping me alive, but it disrupts my natural hormones, putting me in a bad mood. Sometimes I can still feel it wriggling around down there.</description>
                <baseMoodEffect>-5</baseMoodEffect>
            </li>
        </stages>
    </ThoughtDef>

    <RecipeDef ParentName="SurgeryFlesh">
        <defName>InstallStomachSymbiote</defName>
        <label>install stomach symbiote</label>
        <description>Install a stomach symbiote.</description>
        <jobString>Installing stomach symbiote.</jobString>

        <!--Just stick it down their throat, and make sure they don't choke or try to vomit. Ick!-->
        <workerClass>Recipe_InstallImplant</workerClass>
        <workAmount>1000</workAmount>
        <surgerySuccessChanceFactor>4</surgerySuccessChanceFactor>
        <deathOnFailedSurgeryChance>0.1</deathOnFailedSurgeryChance>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>StomachSymbiote</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>StomachSymbiote</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Stomach</li>
        </appliedOnFixedBodyParts>
        <addsHediff>StomachSymbioteHediff</addsHediff>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryFlesh">
        <defName>RemoveStomachSymbiote</defName>
        <label>remove stomach symbiote</label>
        <description>Remove a stomach symbiote.</description>
        <jobString>Removing stomach symbiote.</jobString>
        <successfullyRemovedHediffMessage>{0} has successfully removed {1}'s stomach symbiote.</successfullyRemovedHediffMessage>

        <workerClass>Recipe_RemoveHediff</workerClass>
        <workAmount>3000</workAmount>
        <removesHediff>StomachSymbioteHediff</removesHediff>
        <surgerySuccessChanceFactor>0.8</surgerySuccessChanceFactor>
        <deathOnFailedSurgeryChance>0.1</deathOnFailedSurgeryChance>
        <skillRequirements>
            <Medicine>8</Medicine>
        </skillRequirements>
        <ingredients>
            <li>
                <filter>
                    <categories>
                        <li>Medicine</li>
                    </categories>
                </filter>
                <count>2</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <categories>
                <li>Medicine</li>
            </categories>
        </fixedIngredientFilter>
    </RecipeDef>
</Defs>
